<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>IMA Math-to-Industry Bootcamp 2019: Statistics!</title>
  <meta name="description" content="IMA Math-to-Industry Bootcamp 2019: Statistics!">
  <meta name="generator" content="bookdown 0.4.8 and GitBook 2.6.7">

  <meta property="og:title" content="IMA Math-to-Industry Bootcamp 2019: Statistics!" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="dshuman1/IMA_bootcamp_2019/docs" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="IMA Math-to-Industry Bootcamp 2019: Statistics!" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="homework-2b-model-building-evaluation.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-0.9/htmlwidgets.js"></script>
<script src="libs/datatables-binding-0.2/datatables.js"></script>
<link href="libs/dt-core-1.10.12/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.12/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.12/js/jquery.dataTables.min.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Home</a></li>
<li class="chapter" data-level="2" data-path="syllabus.html"><a href="syllabus.html"><i class="fa fa-check"></i><b>2</b> Syllabus</a><ul>
<li class="chapter" data-level="2.1" data-path="statistics-bootcamp-goals-and-approach.html"><a href="statistics-bootcamp-goals-and-approach.html"><i class="fa fa-check"></i><b>2.1</b> Statistics Bootcamp Goals and Approach</a></li>
<li class="chapter" data-level="2.2" data-path="schedule.html"><a href="schedule.html"><i class="fa fa-check"></i><b>2.2</b> Schedule</a></li>
<li class="chapter" data-level="2.3" data-path="software-requirements.html"><a href="software-requirements.html"><i class="fa fa-check"></i><b>2.3</b> Software Requirements</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="resources.html"><a href="resources.html"><i class="fa fa-check"></i><b>3</b> Resources</a></li>
<li class="chapter" data-level="4" data-path="course-notes.html"><a href="course-notes.html"><i class="fa fa-check"></i><b>4</b> Course Notes</a><ul>
<li class="chapter" data-level="4.1" data-path="day-1-visualizing-modeling-variability.html"><a href="day-1-visualizing-modeling-variability.html"><i class="fa fa-check"></i><b>4.1</b> Day 1: Visualizing &amp; Modeling Variability</a><ul>
<li class="chapter" data-level="4.1.1" data-path="day-1-visualizing-modeling-variability.html"><a href="day-1-visualizing-modeling-variability.html#getting-started"><i class="fa fa-check"></i><b>4.1.1</b> Getting Started</a></li>
<li class="chapter" data-level="4.1.2" data-path="day-1-visualizing-modeling-variability.html"><a href="day-1-visualizing-modeling-variability.html#pre-boot-camp-review"><i class="fa fa-check"></i><b>4.1.2</b> Pre-Boot Camp Review</a></li>
<li class="chapter" data-level="4.1.3" data-path="day-1-visualizing-modeling-variability.html"><a href="day-1-visualizing-modeling-variability.html#explaining-variability"><i class="fa fa-check"></i><b>4.1.3</b> Explaining Variability</a></li>
<li class="chapter" data-level="4.1.4" data-path="day-1-visualizing-modeling-variability.html"><a href="day-1-visualizing-modeling-variability.html#visualizing-relationships"><i class="fa fa-check"></i><b>4.1.4</b> Visualizing Relationships</a></li>
<li class="chapter" data-level="4.1.5" data-path="day-1-visualizing-modeling-variability.html"><a href="day-1-visualizing-modeling-variability.html#linear-regression-models"><i class="fa fa-check"></i><b>4.1.5</b> Linear Regression Models</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="day-2a-data-wrangling.html"><a href="day-2a-data-wrangling.html"><i class="fa fa-check"></i><b>4.2</b> Day 2a: Data Wrangling</a><ul>
<li class="chapter" data-level="4.2.1" data-path="day-2a-data-wrangling.html"><a href="day-2a-data-wrangling.html#us-births"><i class="fa fa-check"></i><b>4.2.1</b> US Births</a></li>
<li class="chapter" data-level="4.2.2" data-path="day-2a-data-wrangling.html"><a href="day-2a-data-wrangling.html#data-wrangling-introduction"><i class="fa fa-check"></i><b>4.2.2</b> Data Wrangling Introduction</a></li>
<li class="chapter" data-level="4.2.3" data-path="day-2a-data-wrangling.html"><a href="day-2a-data-wrangling.html#exercises-baby-names"><i class="fa fa-check"></i><b>4.2.3</b> Exercises: Baby Names</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="day-2b-model-assumptions-measuring-model-quality.html"><a href="day-2b-model-assumptions-measuring-model-quality.html"><i class="fa fa-check"></i><b>4.3</b> Day 2b: Model Assumptions &amp; Measuring Model Quality</a><ul>
<li class="chapter" data-level="4.3.1" data-path="day-2b-model-assumptions-measuring-model-quality.html"><a href="day-2b-model-assumptions-measuring-model-quality.html#regression-assumptions-residual-analysis"><i class="fa fa-check"></i><b>4.3.1</b> Regression Assumptions &amp; Residual Analysis</a></li>
<li class="chapter" data-level="4.3.2" data-path="day-2b-model-assumptions-measuring-model-quality.html"><a href="day-2b-model-assumptions-measuring-model-quality.html#measuring-model-quality-r2-mspe"><i class="fa fa-check"></i><b>4.3.2</b> Measuring model quality: <span class="math inline">\(R^2\)</span> &amp; MSPE</a></li>
<li class="chapter" data-level="4.3.3" data-path="day-2b-model-assumptions-measuring-model-quality.html"><a href="day-2b-model-assumptions-measuring-model-quality.html#an-experiment"><i class="fa fa-check"></i><b>4.3.3</b> An experiment</a></li>
<li class="chapter" data-level="4.3.4" data-path="day-2b-model-assumptions-measuring-model-quality.html"><a href="day-2b-model-assumptions-measuring-model-quality.html#measuring-model-quality-cross-validation"><i class="fa fa-check"></i><b>4.3.4</b> Measuring model quality: cross validation</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="day-3a-more-data-wrangling-changing-cases.html"><a href="day-3a-more-data-wrangling-changing-cases.html"><i class="fa fa-check"></i><b>4.4</b> Day 3a: More Data Wrangling - Changing Cases</a><ul>
<li class="chapter" data-level="4.4.1" data-path="day-3a-more-data-wrangling-changing-cases.html"><a href="day-3a-more-data-wrangling-changing-cases.html#spread-gather-and-wide-and-narrow-data-formats"><i class="fa fa-check"></i><b>4.4.1</b> Spread, Gather, and Wide and Narrow Data Formats</a></li>
<li class="chapter" data-level="4.4.2" data-path="day-3a-more-data-wrangling-changing-cases.html"><a href="day-3a-more-data-wrangling-changing-cases.html#summary-graphic"><i class="fa fa-check"></i><b>4.4.2</b> Summary Graphic</a></li>
<li class="chapter" data-level="4.4.3" data-path="day-3a-more-data-wrangling-changing-cases.html"><a href="day-3a-more-data-wrangling-changing-cases.html#the-daily-show-guests"><i class="fa fa-check"></i><b>4.4.3</b> The Daily Show Guests</a></li>
<li class="chapter" data-level="4.4.4" data-path="day-3a-more-data-wrangling-changing-cases.html"><a href="day-3a-more-data-wrangling-changing-cases.html#gathering-practice"><i class="fa fa-check"></i><b>4.4.4</b> Gathering Practice</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="day-3b-sampling-distributions-confidence-intervals.html"><a href="day-3b-sampling-distributions-confidence-intervals.html"><i class="fa fa-check"></i><b>4.5</b> Day 3b: Sampling Distributions &amp; Confidence Intervals</a><ul>
<li class="chapter" data-level="4.5.1" data-path="day-3b-sampling-distributions-confidence-intervals.html"><a href="day-3b-sampling-distributions-confidence-intervals.html#simulation-study-sampling-variability"><i class="fa fa-check"></i><b>4.5.1</b> Simulation study: sampling variability</a></li>
<li class="chapter" data-level="4.5.2" data-path="day-3b-sampling-distributions-confidence-intervals.html"><a href="day-3b-sampling-distributions-confidence-intervals.html#reporting-estimates-with-measures-of-error"><i class="fa fa-check"></i><b>4.5.2</b> Reporting estimates with measures of error</a></li>
<li class="chapter" data-level="4.5.3" data-path="day-3b-sampling-distributions-confidence-intervals.html"><a href="day-3b-sampling-distributions-confidence-intervals.html#confidence-interval-simulation-study"><i class="fa fa-check"></i><b>4.5.3</b> Confidence interval simulation study</a></li>
<li class="chapter" data-level="4.5.4" data-path="day-3b-sampling-distributions-confidence-intervals.html"><a href="day-3b-sampling-distributions-confidence-intervals.html#extra"><i class="fa fa-check"></i><b>4.5.4</b> Extra</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="day-4a-hypothesis-testing.html"><a href="day-4a-hypothesis-testing.html"><i class="fa fa-check"></i><b>4.6</b> Day 4a: Hypothesis Testing</a><ul>
<li class="chapter" data-level="4.6.1" data-path="day-4a-hypothesis-testing.html"><a href="day-4a-hypothesis-testing.html#warm-up"><i class="fa fa-check"></i><b>4.6.1</b> Warm-up</a></li>
<li class="chapter" data-level="4.6.2" data-path="day-4a-hypothesis-testing.html"><a href="day-4a-hypothesis-testing.html#warning"><i class="fa fa-check"></i><b>4.6.2</b> Warning</a></li>
<li class="chapter" data-level="4.6.3" data-path="day-4a-hypothesis-testing.html"><a href="day-4a-hypothesis-testing.html#hypothesis-testing-concepts"><i class="fa fa-check"></i><b>4.6.3</b> Hypothesis testing concepts</a></li>
<li class="chapter" data-level="4.6.4" data-path="day-4a-hypothesis-testing.html"><a href="day-4a-hypothesis-testing.html#hypothesis-testing-practice"><i class="fa fa-check"></i><b>4.6.4</b> Hypothesis Testing Practice</a></li>
<li class="chapter" data-level="4.6.5" data-path="day-4a-hypothesis-testing.html"><a href="day-4a-hypothesis-testing.html#potential-errors-in-hypothesis-testing"><i class="fa fa-check"></i><b>4.6.5</b> Potential Errors in Hypothesis Testing</a></li>
<li class="chapter" data-level="4.6.6" data-path="day-4a-hypothesis-testing.html"><a href="day-4a-hypothesis-testing.html#extra-1"><i class="fa fa-check"></i><b>4.6.6</b> Extra</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="homework.html"><a href="homework.html"><i class="fa fa-check"></i><b>5</b> Homework</a><ul>
<li class="chapter" data-level="5.1" data-path="pre-bootcamp-homework-intro-to-r-rstudio-and-r-markdown.html"><a href="pre-bootcamp-homework-intro-to-r-rstudio-and-r-markdown.html"><i class="fa fa-check"></i><b>5.1</b> Pre-Bootcamp Homework: Intro to R, RStudio, and R Markdown</a><ul>
<li class="chapter" data-level="5.1.1" data-path="pre-bootcamp-homework-intro-to-r-rstudio-and-r-markdown.html"><a href="pre-bootcamp-homework-intro-to-r-rstudio-and-r-markdown.html#objectives"><i class="fa fa-check"></i><b>5.1.1</b> Objectives</a></li>
<li class="chapter" data-level="5.1.2" data-path="pre-bootcamp-homework-intro-to-r-rstudio-and-r-markdown.html"><a href="pre-bootcamp-homework-intro-to-r-rstudio-and-r-markdown.html#introduction-to-rstudio"><i class="fa fa-check"></i><b>5.1.2</b> Introduction to RStudio</a></li>
<li class="chapter" data-level="5.1.3" data-path="pre-bootcamp-homework-intro-to-r-rstudio-and-r-markdown.html"><a href="pre-bootcamp-homework-intro-to-r-rstudio-and-r-markdown.html#working-with-data-in-rstudio"><i class="fa fa-check"></i><b>5.1.3</b> Working with Data in RStudio</a></li>
<li class="chapter" data-level="5.1.4" data-path="pre-bootcamp-homework-intro-to-r-rstudio-and-r-markdown.html"><a href="pre-bootcamp-homework-intro-to-r-rstudio-and-r-markdown.html#r-markdown-and-reproducible-research"><i class="fa fa-check"></i><b>5.1.4</b> R Markdown and Reproducible Research</a></li>
<li class="chapter" data-level="5.1.5" data-path="pre-bootcamp-homework-intro-to-r-rstudio-and-r-markdown.html"><a href="pre-bootcamp-homework-intro-to-r-rstudio-and-r-markdown.html#practice"><i class="fa fa-check"></i><b>5.1.5</b> Practice</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="homework-1-visualizing-modeling-variability.html"><a href="homework-1-visualizing-modeling-variability.html"><i class="fa fa-check"></i><b>5.2</b> Homework 1: Visualizing &amp; Modeling Variability</a><ul>
<li class="chapter" data-level="5.2.1" data-path="homework-1-visualizing-modeling-variability.html"><a href="homework-1-visualizing-modeling-variability.html#interaction"><i class="fa fa-check"></i><b>5.2.1</b> Interaction</a></li>
<li class="chapter" data-level="5.2.2" data-path="homework-1-visualizing-modeling-variability.html"><a href="homework-1-visualizing-modeling-variability.html#covariates"><i class="fa fa-check"></i><b>5.2.2</b> Covariates</a></li>
<li class="chapter" data-level="5.2.3" data-path="homework-1-visualizing-modeling-variability.html"><a href="homework-1-visualizing-modeling-variability.html#least-squares-estimation"><i class="fa fa-check"></i><b>5.2.3</b> Least Squares Estimation</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="homework-2a-data-wrangling.html"><a href="homework-2a-data-wrangling.html"><i class="fa fa-check"></i><b>5.3</b> Homework 2a: Data Wrangling</a><ul>
<li class="chapter" data-level="5.3.1" data-path="homework-2a-data-wrangling.html"><a href="homework-2a-data-wrangling.html#seasonality"><i class="fa fa-check"></i><b>5.3.1</b> Seasonality</a></li>
<li class="chapter" data-level="5.3.2" data-path="homework-2a-data-wrangling.html"><a href="homework-2a-data-wrangling.html#day-of-the-week"><i class="fa fa-check"></i><b>5.3.2</b> Day of the Week</a></li>
<li class="chapter" data-level="5.3.3" data-path="homework-2a-data-wrangling.html"><a href="homework-2a-data-wrangling.html#holidays"><i class="fa fa-check"></i><b>5.3.3</b> Holidays</a></li>
<li class="chapter" data-level="5.3.4" data-path="homework-2a-data-wrangling.html"><a href="homework-2a-data-wrangling.html#superstition"><i class="fa fa-check"></i><b>5.3.4</b> Superstition</a></li>
<li class="chapter" data-level="5.3.5" data-path="homework-2a-data-wrangling.html"><a href="homework-2a-data-wrangling.html#geography"><i class="fa fa-check"></i><b>5.3.5</b> Geography</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="homework-2b-model-building-evaluation.html"><a href="homework-2b-model-building-evaluation.html"><i class="fa fa-check"></i><b>5.4</b> Homework 2b: Model Building &amp; Evaluation</a><ul>
<li class="chapter" data-level="5.4.1" data-path="homework-2b-model-building-evaluation.html"><a href="homework-2b-model-building-evaluation.html#warm-up-1"><i class="fa fa-check"></i><b>5.4.1</b> Warm-up</a></li>
<li class="chapter" data-level="5.4.2" data-path="homework-2b-model-building-evaluation.html"><a href="homework-2b-model-building-evaluation.html#model-building-subset-selection"><i class="fa fa-check"></i><b>5.4.2</b> Model Building: Subset selection</a></li>
<li class="chapter" data-level="5.4.3" data-path="homework-2b-model-building-evaluation.html"><a href="homework-2b-model-building-evaluation.html#bias-variance-trade-off"><i class="fa fa-check"></i><b>5.4.3</b> Bias-variance trade-off</a></li>
<li class="chapter" data-level="5.4.4" data-path="homework-2b-model-building-evaluation.html"><a href="homework-2b-model-building-evaluation.html#extra-2"><i class="fa fa-check"></i><b>5.4.4</b> Extra</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="homework-3-confidence-intervals-bootstrapping.html"><a href="homework-3-confidence-intervals-bootstrapping.html"><i class="fa fa-check"></i><b>5.5</b> Homework 3: Confidence Intervals &amp; Bootstrapping</a><ul>
<li class="chapter" data-level="5.5.1" data-path="homework-3-confidence-intervals-bootstrapping.html"><a href="homework-3-confidence-intervals-bootstrapping.html#warm-up-2"><i class="fa fa-check"></i><b>5.5.1</b> Warm-up</a></li>
<li class="chapter" data-level="5.5.2" data-path="homework-3-confidence-intervals-bootstrapping.html"><a href="homework-3-confidence-intervals-bootstrapping.html#bootstrapping"><i class="fa fa-check"></i><b>5.5.2</b> Bootstrapping</a></li>
<li class="chapter" data-level="5.5.3" data-path="homework-3-confidence-intervals-bootstrapping.html"><a href="homework-3-confidence-intervals-bootstrapping.html#confidence-prediction-bands"><i class="fa fa-check"></i><b>5.5.3</b> Confidence &amp; Prediction Bands</a></li>
<li class="chapter" data-level="5.5.4" data-path="homework-3-confidence-intervals-bootstrapping.html"><a href="homework-3-confidence-intervals-bootstrapping.html#extra-3"><i class="fa fa-check"></i><b>5.5.4</b> Extra</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">IMA Math-to-Industry Bootcamp 2019: Statistics!</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="homework-3-confidence-intervals-bootstrapping" class="section level2">
<h2><span class="header-section-number">5.5</span> Homework 3: Confidence Intervals &amp; Bootstrapping</h2>
<p><br> <br></p>
<!-- more practice interpreting coefs -->
<p><br />
<br />
</p>
<p><strong>Directions:</strong></p>
<ul>
<li><p>Start a new RMarkdown document.</p></li>
<li><p>Load the following packages at the top of your Rmd: <code>dplyr</code>, <code>ggplot2</code>, <code>fivethirtyeight</code>, <code>infer</code>, <code>broom</code>.</p></li>
<li><p>When interpreting visualizations, models, etc, be sure to do so in a contextually meaningful way.</p></li>
<li><p>This homework is a resource for <em>you</em>. Record all work that is useful for your current learning &amp; future reference. Further, try your best, but don’t stay up all night trying to finish all of the exercises! We’ll discuss any questions / material you didn’t get to tomorrow.</p></li>
</ul>
<p><br />
<br />
</p>
<p><strong>Goals:</strong></p>
<p>In this homework you will:</p>
<ul>
<li><p>apply the concepts of confidence intervals; and</p></li>
<li>explore new concepts in statistical inference:
<ul>
<li><em>bootstrapping</em>;<br />
</li>
<li><em>confidence bands</em>;<br />
</li>
<li><em>prediction bands</em>; and<br />
</li>
<li><em>“significance”</em>.</li>
</ul></li>
</ul>
<p><br />
<br />
<br />
<br />
<br />
<br />
</p>
<div id="warm-up-2" class="section level3">
<h3><span class="header-section-number">5.5.1</span> Warm-up</h3>
<p>You’ve likely heard about the controversy surrounding NFL players kneeling during the national anthem. Donald Trump has publicly disagreed with the protests. This begs the question - how might fans react? To this end, <a href="https://fivethirtyeight.com/features/how-every-nfl-teams-fans-lean-politically/">fivethirtyeight article</a> explored the association between Trump support and interest in various sports in different <em>designated market areas</em>. Load these data and explore the codebook.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Load the data</span>
<span class="kw">data</span>(<span class="st">&quot;nfl_fandom_google&quot;</span>)

<span class="co"># Check out the first 6 rows</span>
<span class="kw">head</span>(nfl_fandom_google)

<span class="co"># Examine the codebook</span>
?nfl_fandom_google</code></pre></div>
<p><br />
<br />
</p>
<ol style="list-style-type: decimal">
<li><strong>Check out the data</strong>
<ol style="list-style-type: lower-alpha">
<li>Each row represents a “designated market area” (<code>dma</code>). Do a little Google search and write a 1 sentence description of what this is.<br />
</li>
<li>Examine and summarize the first visualization in the original <a href="https://fivethirtyeight.com/features/how-every-nfl-teams-fans-lean-politically/">fivethirtyeight article</a>. (You’ll recreate this for “extra credit” at the end of the homework.)</li>
</ol></li>
</ol>
<p><br />
<br />
</p>
<ol start="2" style="list-style-type: decimal">
<li><p><strong>NBA</strong><br />
For now, we’ll focus on the relationship between <code>nba</code> interest (our response) and the <code>trump_2016_vote</code> (our predictor). Consider the population model represented by</p>
<center>
<code>nba</code> = <span class="math inline">\(\beta_0\)</span> + <span class="math inline">\(\beta_1\)</span> <code>trump_2016_vote</code> + <span class="math inline">\(\varepsilon\)</span>
</center>
<p>where we’ll assume that <span class="math inline">\(\varepsilon \stackrel{ind}{\sim} N(0,\sigma^2)\)</span>.</p>
<ol style="list-style-type: lower-alpha">
<li><p>Construct a visualization of the relationship between <code>nba</code> and <code>trump_2016_vote</code>. Include a representation of the least squares model of this relationship.</p></li>
<li><p>Fit the least squares model, <code>nba_mod</code>, of <code>nba</code> by <code>trump_2016_vote</code>. (Take a second to interpret the coefficients.)</p></li>
<li><p>Assess &amp; comment on whether our model assumptions appear to hold.</p></li>
</ol></li>
</ol>
<p><br />
<br />
</p>
<ol start="3" style="list-style-type: decimal">
<li><strong>Confidence intervals</strong><br />
As long as the model assumptions hold (which they seem to) and our sample size of <span class="math inline">\(n=207\)</span> is large enough (it probably is), the CLT guarantees that the sampling distribution of the estimate <span class="math inline">\(\hat{\beta}_1\)</span> of <span class="math inline">\(\beta_1\)</span> is <span class="math display">\[\hat{\beta}_1 \sim N\left(\beta_1, \left(\text{s.e.}(\hat{\beta}_1)\right)^2 \right)\]</span>
<ol style="list-style-type: lower-alpha">
<li>Revisit the model summary table. Report the least squares estimate <span class="math inline">\(\hat{\beta}_1\)</span> and its standard error <span class="math inline">\(\text{s.e.}(\hat{\beta}_1)\)</span>.<br />
</li>
<li>Use the CLT in conjunction with the 68-95-99.7 Rule to approximate (and interpret) a 95% CI for <span class="math inline">\(\beta_1\)</span>.<br />
</li>
<li>Obtain a more accurate CI using the <code>confint()</code> function.<br />
</li>
<li>Is there enough evidence to conclude that there’s a negative association between a DMA’s NBA interest and Trump election support?</li>
</ol></li>
</ol>
<p><br />
<br />
<br />
<br />
<br />
<br />
</p>
</div>
<div id="bootstrapping" class="section level3">
<h3><span class="header-section-number">5.5.2</span> Bootstrapping</h3>
<p>The quality of our above inference for <span class="math inline">\(\beta_1\)</span> hinges on the CLT for the sampling distribution of <span class="math inline">\(\hat{\beta}_1\)</span> which, in turn, hinges on satisfying the model assumptions. Thus there’s a lot of room for error - we can’t know how well the <em>real</em> sampling distribution of <span class="math inline">\(\hat{\beta}_1\)</span> follows the CLT. In turn, we might be wary of the quality of the CI calculated above.</p>
<p><strong>Nonparametric</strong> inferential techniques offer an alternative - they’re engineered without making any assumptions about the sampling distribution of <span class="math inline">\(\hat{\beta}_i\)</span> (ie. no CLT!). We’ll consider one such technique: the <strong>bootstrap</strong>. The saying “<em>to pull oneself up by the bootstraps</em>” is often attributed to Rudolf Erich Raspe’s 1781 <em>The Surprising Adventures of Baron Munchausen</em> in which the character pulls himself out of a swamp by his hair (not bootstraps). <a href="http://www.bookofdaystales.com/baron-munchausen/">Image source</a>. In short, it means to get something from nothing, through your own effort.</p>
<center>
<img src="images/bootstraps.jpg" height="250px"/>
</center>
<p>We can extend the bootstrap idea to <em>estimate</em> the sampling distribution of <span class="math inline">\(\hat{\beta}\)</span> using only our sample data and without making any distributional assumptions (eg: no Normal CLT). To this end, recall that the sampling distribution of <span class="math inline">\(\hat{\beta}_1\)</span> is a collection of all possible estimates <span class="math inline">\(\hat{\beta}_1\)</span> that we could get from all possible samples of the same size:</p>
<center>
<img src="images/sampling_dist.png" height="250px"/>
</center>
<p><br />
</p>
<p>Of course, we can’t observe this in practice. We only have <em>ONE sample</em> from the population, thus cannot approximate the sampling distribution by taking, say, 1000 different samples from the population and calculating <span class="math inline">\(\hat{\beta}\)</span> from each. What we <em>can</em> do is <strong>re-sample</strong> our sample and calculate an estimate <span class="math inline">\(\hat{\beta}_1\)</span> from each re-sample. This produces a <strong>bootstrap distribution</strong>:</p>
<center>
<img src="images/bootstrap_dist.png" height="250px"/>
</center>
<p><br />
</p>
<p>The specific bootstrapping algorithm is described below.</p>
<p><br />
<br />
</p>
<blockquote>
<p><strong>Bootstrapping</strong></p>
<p>Suppose we’re interested in estimating some parameter <span class="math inline">\(\beta\)</span>. Then starting with <em>our</em> sample of size <span class="math inline">\(n\)</span>:</p>
<ol style="list-style-type: decimal">
<li><p>Take 1000 (many) <strong>RE</strong>samples of size <span class="math inline">\(n\)</span> WITH REPLACEMENT from the sample. Some cases might appear multiple times, some not at all. This is analogous to seeing several similar cases in a sample from the population.</p></li>
<li><p>Calculate <span class="math inline">\(\hat{\beta}\)</span> using each sample. This gives 1000 estimates: <span class="math display">\[\hat{\beta}^{(1)}, ..., \hat{\beta}^{(1000)}\]</span> The distribution of these is our <strong>bootstrap distribution</strong>. The shape and spread of this distribution (though not the location) will mimic that of the sampling distribution.</p></li>
<li><p>Use the bootstrap distribution to construct confidence intervals (and, later, hypothesis tests) for <span class="math inline">\(\beta\)</span> WITHOUT assuming any theory about the distribution, shape, spread of the sampling distribution.</p></li>
</ol>
<p><br></p>
<p><strong>Properties:</strong><br />
The <em>shape</em> and <em>standard deviation</em> of the <span class="math inline">\(\hat{\beta}^{(i)}\)</span> bootstrap distribution will provide a good approximation of the <em>shape</em> and <em>standard error</em> of the <span class="math inline">\(\hat{\beta}\)</span> sampling distribution so long as <span class="math inline">\(n\)</span> is “large enough” and the sample is representative of the population. However, the bootstrap distribution will be centered at our sample <span class="math inline">\(\hat{\beta}\)</span> whereas the sampling distribution is centered at <span class="math inline">\(\beta\)</span>.</p>
</blockquote>
<p><br />
<br />
<br />
<br />
</p>
<ol start="4" style="list-style-type: decimal">
<li><p><strong>bootstrap simulation</strong><br />
Conduct a bootstrap simulation with the following steps. (The required syntax is similar to that we used earlier!)</p>
<ul>
<li><p>Set the random number seed to 2000.</p></li>
<li><p>Use <code>rep_sample_n()</code> to take 1000 <strong>re</strong>samples of <span class="math inline">\(n\)</span> rows (market areas) from <code>nfl_fandom_google</code>. Be careful: don’t forget to sample <em>with</em> replacement.</p></li>
<li><p>For each of the 1000 samples, fit a model of <code>nba</code> by <code>trump_2016_vote</code>.</p></li>
<li><p>Output the intercept and slope coefficients for each of the 1000 models. Store these in a data frame named <code>boot_data</code>.</p></li>
</ul>
<p>The output might look something like this (with possibly different numbers):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(boot_data, <span class="dv">3</span>)
## # A tibble: 3 x 6
## # Groups:   replicate [2]
##   replicate term            estimate std.error statistic  p.value
##       &lt;int&gt; &lt;chr&gt;              &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
## 1         1 (Intercept)       34.7      1.63       21.3  7.56e-54
## 2         1 trump_2016_vote   -0.220    0.0288     -7.63 8.87e-13
## 3         2 (Intercept)       31.4      1.61       19.5  1.10e-48</code></pre></div></li>
</ol>
<p><br />
<br />
</p>
<ol start="5" style="list-style-type: decimal">
<li><strong>bootstrap inference: confidence intervals</strong>
<ol style="list-style-type: lower-alpha">
<li><p>Create a data set, <code>boot_slopes</code>, that only includes the bootstrapped slopes <span class="math inline">\(\hat{\beta}_1\)</span> (coefficient of the <code>trump_2016_vote</code> term).</p></li>
<li><p>Construct and describe a histogram of the 1000 bootstrap <em>slopes</em>.</p></li>
<li><p>Calculate the mean of the 1000 bootstrap slopes. (This should be close to the original least squares estimate, -0.1785!)</p></li>
<li><p>Calculate the standard deviation of the 1000 bootstrap slopes. Notice that this is very similar to the standard error <span class="math inline">\(\text{s.e.}(\hat{\beta}_1)\)</span> calculated via complicated formula, <code>0.02891</code>!</p></li>
<li><p>Using <em>only</em> the 1000 bootstrap slopes, calculate a 95% CI for <span class="math inline">\(\beta_1\)</span>. (This should be close to what you observed for the classical approach.)<br />
NOTE: You weren’t given a formula to do this. Use your intuition and, subsequently, identify the appropriate function! <em>No matter what you do,</em> do NOT make any assumptions about normality, the CLT, etc. This means no intervals of the form ‘estimate <span class="math inline">\(\pm\)</span> 2 (standard error)’, no use of ‘dnorm / qnorm / pnorm’, etc</p></li>
</ol></li>
</ol>
<p><br />
<br />
</p>
<ol start="6" style="list-style-type: decimal">
<li><p><strong>Extending the Bootstrap</strong><br />
Bootstrapping! It’s quite wonderful:</p>
<ul>
<li><p>When the CLT <em>is</em> a valid assumption, bootstrap and classical results are comparable (as we saw). In cases where the CLT is suspect, a bootstrap analysis can be more reliable (at minimum, it’s a good sanity check).</p></li>
<li><p>With NO CLT assumptions, we were able to construct CIs. Thus bootstrapping is generalizable &amp; useful in contexts for which we have limited supporting theory.</p></li>
</ul>
<p>As to the final point, consider the following. Above you bootstrapped inference for the <code>trump_2016_vote</code> model coefficient. Suppose instead we want to construct a bootstrap CI for the <span class="math inline">\(R^2\)</span> of the model for <code>nba</code> interest vs <code>trump_2016_vote</code>. A complicated formula does exist for this CI. However, the quality of the CIs is sensitive to meeting the underlying theoretical assumptions about the sampling distribution for correlations. Luckily, we know how to bootstrap!</p>
<ol style="list-style-type: lower-alpha">
<li><p>Do a bootstrap simulation: for each of the 1000 resamples you constructed above, calculate the <span class="math inline">\(R^2\)</span> between <code>nba</code> and <code>trump_2016_vote</code>. The output should look something like this (with possibly different numbers):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(boot_cor, <span class="dv">3</span>)
## # A tibble: 3 x 2
## # Groups:   replicate [3]
##   replicate     x
##       &lt;int&gt; &lt;dbl&gt;
## 1         1 0.221
## 2         2 0.120
## 3         3 0.130</code></pre></div>
<p>HINT: From a generic <code>lm()</code> model, you can get the <span class="math inline">\(R^2\)</span> by <code>summary(my_model)$r.squared</code>.</p></li>
<li><p>Construct and interpret a 95% bootstrap confidence interval for the <span class="math inline">\(R^2\)</span>.</p></li>
</ol></li>
</ol>
<p><br />
<br />
<br />
<br />
</p>
</div>
<div id="confidence-prediction-bands" class="section level3">
<h3><span class="header-section-number">5.5.3</span> Confidence &amp; Prediction Bands</h3>
<p>Recall our original sample model of <code>nba</code> interest vs <code>trump_2016_vote</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">nba_mod &lt;-<span class="st"> </span><span class="kw">lm</span>(nba <span class="op">~</span><span class="st"> </span>trump_2016_vote, nfl_fandom_google)
<span class="kw">summary</span>(nba_mod)
## 
## Call:
## lm(formula = nba ~ trump_2016_vote, data = nfl_fandom_google)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -10.211  -3.647  -0.698   3.457  15.275 
## 
## Coefficients:
##                 Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)      32.5372     1.6158   20.14  &lt; 2e-16 ***
## trump_2016_vote  -0.1785     0.0289   -6.18  3.5e-09 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 5.1 on 205 degrees of freedom
## Multiple R-squared:  0.157,  Adjusted R-squared:  0.153 
## F-statistic: 38.1 on 1 and 205 DF,  p-value: 3.49e-09</code></pre></div>
<p>Consider using our original sample model to <em>predict</em> <code>nba</code> interest (<span class="math inline">\(y\)</span>) by <code>trump_2016_vote</code> (<span class="math inline">\(x\)</span>):</p>
<p><span class="math display">\[y = 32.537 - 0.179 x + \varepsilon\]</span></p>
<p>where, by the reported <code>Residual standard error</code>, <span class="math inline">\(\varepsilon \sim N(0, 5.103^2)\)</span>. There are 2 types of predictions we can make for, say, a Trump support of 50%:</p>
<ul>
<li><p>Model trend:<br />
Predict the average <code>nba</code> interest of all DMAs where Trump received 50% of the vote.</p></li>
<li><p>Individual behavior:<br />
Predict the <code>nba</code> interest of a <em>specific</em> DMA (eg: Smalltown) where Trump received 50% of the vote.</p></li>
</ul>
<p>The values of the two predictions are the same:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="fl">32.53716</span> <span class="op">-</span><span class="st"> </span><span class="fl">0.17853</span> <span class="op">*</span><span class="st"> </span><span class="dv">50</span>
## [1] 23.61</code></pre></div>
<p>However, the potential <em>error</em> in these predictions differs. <strong>Before moving on, check your intuition:</strong> do you think there’s more error in predicting trends or individual behavior? Let’s see…</p>
<p><br />
<br />
</p>
<ol start="7" style="list-style-type: decimal">
<li><strong>Confidence interval for the trend</strong>
<ol style="list-style-type: lower-alpha">
<li><p>Calculate and interpret the 95% confidence interval for the average <code>nba</code> interest of all DMAs where Trump received 50% of the vote:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">predict</span>(nba_mod, <span class="dt">newdata =</span> <span class="kw">data.frame</span>(<span class="dt">trump_2016_vote =</span> <span class="dv">50</span>), <span class="dt">interval =</span> <span class="st">&quot;confidence&quot;</span>, <span class="dt">level =</span> <span class="fl">0.95</span>)</code></pre></div>
<p>NOTE: <code>fit</code> is the prediction (which due to rounding is slightly different than our “by hand” prediction), <code>lwr</code> gives the lower bound of the CI, and <code>upr</code> gives the upper bound of the CI.</p></li>
<li><p><strong>If you have time:</strong> the CI above was constructed utilizing parametric model assumptions. Construct an alternative nonparametric bootstrap CI. (You might find some helpful syntax in HW 2.)</p></li>
</ol></li>
</ol>
<p><br />
<br />
</p>
<ol start="8" style="list-style-type: decimal">
<li><strong>Prediction interval for an individual case</strong>
<ol style="list-style-type: lower-alpha">
<li><p>Calculate and interpret the 95% <strong>prediction interval</strong> for the the <code>nba</code> interest of a <em>specific</em> DMA (eg: Smalltown) where Trump received 50% of the vote:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">predict</span>(nba_mod, <span class="dt">newdata =</span> <span class="kw">data.frame</span>(<span class="dt">trump_2016_vote =</span> <span class="dv">50</span>), <span class="dt">interval =</span> <span class="st">&quot;prediction&quot;</span>, <span class="dt">level =</span> <span class="fl">0.95</span>)</code></pre></div></li>
<li><p><strong>If you have time:</strong> Construct an alternative nonparametric bootstrap prediction interval. HINT: You can use <code>rnorm(1, mean = 0, sd = 5.103)</code> to simulate a Normal residual / individual variability from the trend.</p></li>
</ol></li>
</ol>
<p><br />
<br />
</p>
<ol start="9" style="list-style-type: decimal">
<li><p><strong>Visualizing confidence &amp; prediction bands</strong><br />
We can visualize these concepts by placing prediction and confidence bands around the entire model. These represent the intervals calculated at each value of the <code>trump_2016_vote</code> variable. To begin, construct confidence bands by omitting <code>se = FALSE</code> in the <code>geom_smooth()</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Confidence bands</span>
<span class="kw">ggplot</span>(nfl_fandom_google, <span class="kw">aes</span>(<span class="dt">y =</span> nba, <span class="dt">x =</span> trump_2016_vote)) <span class="op">+</span><span class="st"> </span>
<span class="st">    </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span>
<span class="st">    </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">&quot;lm&quot;</span>)</code></pre></div>
<p>Next, include prediction bands using this more complicated syntax:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Calculate prediction intervals for every trump_2016_vote value</span>
pred_int_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">data.frame</span>(nfl_fandom_google, <span class="kw">predict</span>(nba_mod, 
    <span class="dt">newdata =</span> <span class="kw">data.frame</span>(<span class="dt">trump_2016_vote =</span> nfl_fandom_google<span class="op">$</span>trump_2016_vote), <span class="dt">interval =</span> <span class="st">&#39;prediction&#39;</span>))
<span class="kw">head</span>(pred_int_<span class="dv">1</span>)    

<span class="co"># Prediction bands</span>
<span class="kw">ggplot</span>(pred_int_<span class="dv">1</span>, <span class="kw">aes</span>(<span class="dt">y =</span> nba, <span class="dt">x =</span> trump_2016_vote)) <span class="op">+</span><span class="st"> </span>
<span class="st">    </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span>
<span class="st">    </span><span class="kw">geom_smooth</span>(<span class="dt">method=</span><span class="st">&#39;lm&#39;</span>, <span class="dt">color=</span><span class="st">&quot;black&quot;</span>) <span class="op">+</span><span class="st"> </span>
<span class="st">    </span><span class="kw">geom_ribbon</span>(<span class="kw">aes</span>(<span class="dt">y=</span>fit, <span class="dt">ymin=</span>lwr, <span class="dt">ymax=</span>upr, <span class="dt">fill=</span><span class="st">&#39;prediction&#39;</span>), 
<span class="dt">alpha=</span><span class="fl">0.2</span>)</code></pre></div>
Explain:
<ol style="list-style-type: lower-alpha">
<li>Why is it intuitive that the prediction bands are wider than the confidence bands?<br />
</li>
<li>Though it’s not as noticeable with the prediction bands, these and the confidence bands are always the most narrow at the same point – in this case the coordinates are (22.8, 54.5). What other meaning do these values have? Provide some proof and explain why it makes intuitive sense that the bands are narrowest at this point.</li>
</ol></li>
</ol>
<p><br />
<br />
</p>
<ol start="10" style="list-style-type: decimal">
<li><strong>Toward hypothesis testing</strong><br />
Tomorrow we’ll start talking about hypothesis testing. We already have the tools and ideas to do some simple tests. Consider the below plots of <code>nba</code> and <code>nfl</code> interest vs <code>trump_2016_vote</code>. Do we have enough evidence to conclude there’s a relationship between a market’s NBA interest &amp; their Trump support? What about the relationship between a market’s NFL interest &amp; their Trump support? Explain.<br />
<img src="IMA_book_2019_files/figure-html/unnamed-chunk-367-1.png" width="\textwidth" style="display: block; margin: auto;" /></li>
</ol>
<p><br />
<br />
<br />
<br />
</p>
</div>
<div id="extra-3" class="section level3">
<h3><span class="header-section-number">5.5.4</span> Extra</h3>
<p>Recreate the visualization at the top of the <a href="https://fivethirtyeight.com/features/how-every-nfl-teams-fans-lean-politically/">fivethirtyeight article</a>. To get started, you’ll first need to <em>reshape</em> the data so that instead of each row representing a DMA, each row represents a DMA &amp; sport combination:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">nfl_fandom_google <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">    </span><span class="kw">gather</span>(activity, market_share, <span class="op">-</span><span class="kw">c</span>(dma, trump_2016_vote))</code></pre></div>
<p><br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
</p>

</div>
</div>
</div>










<!--  -->
            </section>

          </div>
        </div>
      </div>
<a href="homework-2b-model-building-evaluation.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"download": null,
"toc": {
"collapse": "section",
"depth": 3,
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
},
"search": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
