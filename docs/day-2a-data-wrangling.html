<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>IMA Math-to-Industry Bootcamp 2019: Statistics!</title>
  <meta name="description" content="IMA Math-to-Industry Bootcamp 2019: Statistics!">
  <meta name="generator" content="bookdown 0.4.8 and GitBook 2.6.7">

  <meta property="og:title" content="IMA Math-to-Industry Bootcamp 2019: Statistics!" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="dshuman1/IMA_bootcamp_2019/docs" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="IMA Math-to-Industry Bootcamp 2019: Statistics!" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="day-1-visualizing-modeling-variability.html">
<link rel="next" href="day-2b-model-assumptions-measuring-model-quality.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-0.9/htmlwidgets.js"></script>
<script src="libs/datatables-binding-0.2/datatables.js"></script>
<link href="libs/dt-core-1.10.12/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.12/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.12/js/jquery.dataTables.min.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Home</a></li>
<li class="chapter" data-level="2" data-path="syllabus.html"><a href="syllabus.html"><i class="fa fa-check"></i><b>2</b> Syllabus</a><ul>
<li class="chapter" data-level="2.1" data-path="statistics-bootcamp-goals-and-approach.html"><a href="statistics-bootcamp-goals-and-approach.html"><i class="fa fa-check"></i><b>2.1</b> Statistics Bootcamp Goals and Approach</a></li>
<li class="chapter" data-level="2.2" data-path="schedule.html"><a href="schedule.html"><i class="fa fa-check"></i><b>2.2</b> Schedule</a></li>
<li class="chapter" data-level="2.3" data-path="software-requirements.html"><a href="software-requirements.html"><i class="fa fa-check"></i><b>2.3</b> Software Requirements</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="resources.html"><a href="resources.html"><i class="fa fa-check"></i><b>3</b> Resources</a></li>
<li class="chapter" data-level="4" data-path="course-notes.html"><a href="course-notes.html"><i class="fa fa-check"></i><b>4</b> Course Notes</a><ul>
<li class="chapter" data-level="4.1" data-path="day-1-visualizing-modeling-variability.html"><a href="day-1-visualizing-modeling-variability.html"><i class="fa fa-check"></i><b>4.1</b> Day 1: Visualizing &amp; Modeling Variability</a><ul>
<li class="chapter" data-level="4.1.1" data-path="day-1-visualizing-modeling-variability.html"><a href="day-1-visualizing-modeling-variability.html#getting-started"><i class="fa fa-check"></i><b>4.1.1</b> Getting Started</a></li>
<li class="chapter" data-level="4.1.2" data-path="day-1-visualizing-modeling-variability.html"><a href="day-1-visualizing-modeling-variability.html#pre-boot-camp-review"><i class="fa fa-check"></i><b>4.1.2</b> Pre-Boot Camp Review</a></li>
<li class="chapter" data-level="4.1.3" data-path="day-1-visualizing-modeling-variability.html"><a href="day-1-visualizing-modeling-variability.html#explaining-variability"><i class="fa fa-check"></i><b>4.1.3</b> Explaining Variability</a></li>
<li class="chapter" data-level="4.1.4" data-path="day-1-visualizing-modeling-variability.html"><a href="day-1-visualizing-modeling-variability.html#visualizing-relationships"><i class="fa fa-check"></i><b>4.1.4</b> Visualizing Relationships</a></li>
<li class="chapter" data-level="4.1.5" data-path="day-1-visualizing-modeling-variability.html"><a href="day-1-visualizing-modeling-variability.html#linear-regression-models"><i class="fa fa-check"></i><b>4.1.5</b> Linear Regression Models</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="day-2a-data-wrangling.html"><a href="day-2a-data-wrangling.html"><i class="fa fa-check"></i><b>4.2</b> Day 2a: Data Wrangling</a><ul>
<li class="chapter" data-level="4.2.1" data-path="day-2a-data-wrangling.html"><a href="day-2a-data-wrangling.html#us-births"><i class="fa fa-check"></i><b>4.2.1</b> US Births</a></li>
<li class="chapter" data-level="4.2.2" data-path="day-2a-data-wrangling.html"><a href="day-2a-data-wrangling.html#data-wrangling-introduction"><i class="fa fa-check"></i><b>4.2.2</b> Data Wrangling Introduction</a></li>
<li class="chapter" data-level="4.2.3" data-path="day-2a-data-wrangling.html"><a href="day-2a-data-wrangling.html#exercises-baby-names"><i class="fa fa-check"></i><b>4.2.3</b> Exercises: Baby Names</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="day-2b-model-assumptions-measuring-model-quality.html"><a href="day-2b-model-assumptions-measuring-model-quality.html"><i class="fa fa-check"></i><b>4.3</b> Day 2b: Model Assumptions &amp; Measuring Model Quality</a><ul>
<li class="chapter" data-level="4.3.1" data-path="day-2b-model-assumptions-measuring-model-quality.html"><a href="day-2b-model-assumptions-measuring-model-quality.html#regression-assumptions-residual-analysis"><i class="fa fa-check"></i><b>4.3.1</b> Regression Assumptions &amp; Residual Analysis</a></li>
<li class="chapter" data-level="4.3.2" data-path="day-2b-model-assumptions-measuring-model-quality.html"><a href="day-2b-model-assumptions-measuring-model-quality.html#measuring-model-quality-r2-mspe"><i class="fa fa-check"></i><b>4.3.2</b> Measuring model quality: <span class="math inline">\(R^2\)</span> &amp; MSPE</a></li>
<li class="chapter" data-level="4.3.3" data-path="day-2b-model-assumptions-measuring-model-quality.html"><a href="day-2b-model-assumptions-measuring-model-quality.html#an-experiment"><i class="fa fa-check"></i><b>4.3.3</b> An experiment</a></li>
<li class="chapter" data-level="4.3.4" data-path="day-2b-model-assumptions-measuring-model-quality.html"><a href="day-2b-model-assumptions-measuring-model-quality.html#measuring-model-quality-cross-validation"><i class="fa fa-check"></i><b>4.3.4</b> Measuring model quality: cross validation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="homework.html"><a href="homework.html"><i class="fa fa-check"></i><b>5</b> Homework</a><ul>
<li class="chapter" data-level="5.1" data-path="pre-bootcamp-homework-intro-to-r-rstudio-and-r-markdown.html"><a href="pre-bootcamp-homework-intro-to-r-rstudio-and-r-markdown.html"><i class="fa fa-check"></i><b>5.1</b> Pre-Bootcamp Homework: Intro to R, RStudio, and R Markdown</a><ul>
<li class="chapter" data-level="5.1.1" data-path="pre-bootcamp-homework-intro-to-r-rstudio-and-r-markdown.html"><a href="pre-bootcamp-homework-intro-to-r-rstudio-and-r-markdown.html#objectives"><i class="fa fa-check"></i><b>5.1.1</b> Objectives</a></li>
<li class="chapter" data-level="5.1.2" data-path="pre-bootcamp-homework-intro-to-r-rstudio-and-r-markdown.html"><a href="pre-bootcamp-homework-intro-to-r-rstudio-and-r-markdown.html#introduction-to-rstudio"><i class="fa fa-check"></i><b>5.1.2</b> Introduction to RStudio</a></li>
<li class="chapter" data-level="5.1.3" data-path="pre-bootcamp-homework-intro-to-r-rstudio-and-r-markdown.html"><a href="pre-bootcamp-homework-intro-to-r-rstudio-and-r-markdown.html#working-with-data-in-rstudio"><i class="fa fa-check"></i><b>5.1.3</b> Working with Data in RStudio</a></li>
<li class="chapter" data-level="5.1.4" data-path="pre-bootcamp-homework-intro-to-r-rstudio-and-r-markdown.html"><a href="pre-bootcamp-homework-intro-to-r-rstudio-and-r-markdown.html#r-markdown-and-reproducible-research"><i class="fa fa-check"></i><b>5.1.4</b> R Markdown and Reproducible Research</a></li>
<li class="chapter" data-level="5.1.5" data-path="pre-bootcamp-homework-intro-to-r-rstudio-and-r-markdown.html"><a href="pre-bootcamp-homework-intro-to-r-rstudio-and-r-markdown.html#practice"><i class="fa fa-check"></i><b>5.1.5</b> Practice</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="homework-1-visualizing-modeling-variability.html"><a href="homework-1-visualizing-modeling-variability.html"><i class="fa fa-check"></i><b>5.2</b> Homework 1: Visualizing &amp; Modeling Variability</a><ul>
<li class="chapter" data-level="5.2.1" data-path="homework-1-visualizing-modeling-variability.html"><a href="homework-1-visualizing-modeling-variability.html#interaction"><i class="fa fa-check"></i><b>5.2.1</b> Interaction</a></li>
<li class="chapter" data-level="5.2.2" data-path="homework-1-visualizing-modeling-variability.html"><a href="homework-1-visualizing-modeling-variability.html#covariates"><i class="fa fa-check"></i><b>5.2.2</b> Covariates</a></li>
<li class="chapter" data-level="5.2.3" data-path="homework-1-visualizing-modeling-variability.html"><a href="homework-1-visualizing-modeling-variability.html#least-squares-estimation"><i class="fa fa-check"></i><b>5.2.3</b> Least Squares Estimation</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">IMA Math-to-Industry Bootcamp 2019: Statistics!</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="day-2a-data-wrangling" class="section level2">
<h2><span class="header-section-number">4.2</span> Day 2a: Data Wrangling</h2>
<p><br />
<br />
</p>
<p><strong>Getting started:</strong></p>
<p>As you settle in, start a new Rmd and load the following packages at the top:</p>
<pre><code>library(tidyverse)
library(lubridate)
library(DT)
library(mosaic)
library(fivethirtyeight)
library(boot)</code></pre>
<p>If you don’t have <code>boot</code> installed, then install it first. In the <strong>console</strong>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">&quot;boot&quot;</span>, <span class="dt">dependencies =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p>Then add this command to load a portion of the data on US births:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Birthdays&lt;-<span class="kw">select</span>(Birthdays,state,date,year,births)</code></pre></div>
<p><br> <br></p>
<p><strong>Today’s plan:</strong></p>
<ol style="list-style-type: decimal">
<li><p>Discuss yesterday’s homework &amp; tie up any loose ends</p></li>
<li><p>Data wrangling</p></li>
<li><p>Model assumptions</p></li>
<li>Measuring model quality
<ul>
<li>residual analysis</li>
<li><span class="math inline">\(R^2\)</span> &amp; MSPE</li>
<li>cross validation<br />
</li>
<li>overfitting<br />
</li>
<li>bias-variance trade-off</li>
</ul></li>
</ol>
<p><br> <br></p>
<div id="us-births" class="section level3">
<h3><span class="header-section-number">4.2.1</span> US Births</h3>
<p>The number of daily births in the US varies over the year and from day to day. What’s surprising to many people is that the variation from one day to the next can be huge: some days have only about 80% as many births as others. Why? In this activity we’ll use basic data wrangling skills to understand some drivers of daily births.</p>
<p>The data table <code>Birthdays</code> in the <code>mosaicData</code> package gives the number of births recorded on each day of the year in each state from 1969 to 1988.<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a></p>
<table>
<caption><span id="tab:unnamed-chunk-54">Table 4.1: </span>A subset of the initial birthday data.</caption>
<thead>
<tr class="header">
<th align="left">state</th>
<th align="left">date</th>
<th align="right">year</th>
<th align="right">births</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">AK</td>
<td align="left">1969-01-01</td>
<td align="right">1969</td>
<td align="right">14</td>
</tr>
<tr class="even">
<td align="left">AL</td>
<td align="left">1969-01-01</td>
<td align="right">1969</td>
<td align="right">174</td>
</tr>
<tr class="odd">
<td align="left">AR</td>
<td align="left">1969-01-01</td>
<td align="right">1969</td>
<td align="right">78</td>
</tr>
<tr class="even">
<td align="left">AZ</td>
<td align="left">1969-01-01</td>
<td align="right">1969</td>
<td align="right">84</td>
</tr>
<tr class="odd">
<td align="left">CA</td>
<td align="left">1969-01-01</td>
<td align="right">1969</td>
<td align="right">824</td>
</tr>
<tr class="even">
<td align="left">CO</td>
<td align="left">1969-01-01</td>
<td align="right">1969</td>
<td align="right">100</td>
</tr>
</tbody>
</table>
<p><br> <br></p>
</div>
<div id="data-wrangling-introduction" class="section level3">
<h3><span class="header-section-number">4.2.2</span> Data Wrangling Introduction</h3>
<p><br></p>
<div id="tidy-data" class="section level4">
<h4><span class="header-section-number">4.2.2.1</span> Tidy Data</h4>
<p>Additional reading:</p>
<ul>
<li><a href="https://www.jstatsoft.org/article/view/v059i10">Wickham, Tidy Data</a></li>
<li><a href="http://r4ds.had.co.nz/tidy-data.html">Wickham and Grolemund, Tidy Data</a></li>
</ul>

<p>There are different ways to store and represent the same data. In order to be consistent and to also take advantage of the vectorized nature of <code>R</code>, the <code>tidyverse</code> packages we’ll use provide a set of three interrelated rules/conventions for a dataset to be <code>tidy</code>:</p>
<ol style="list-style-type: decimal">
<li>Each variable must have its own column.</li>
<li>Each observation must have its own row.</li>
<li>Each value must have its own cell.</li>
</ol>
<p>One of the first things we’ll often do when acquiring new data is to “tidy it” into this form. For now, we can already start thinking of a data frame (tibble) as a table whose rows are the individual cases and whose columns are the variables on which we have information for each individual case. The <a href="https://github.com/rstudio/cheatsheets/raw/master/source/pdfs/data-import-cheatsheet.pdf">data import cheat sheet</a> has a figure summarizing this principle.</p>
<p><br> <br></p>
</div>
<div id="data-verbs" class="section level4">
<h4><span class="header-section-number">4.2.2.2</span> Data Verbs</h4>
<p>Additional reading:</p>
<ul>
<li><a href="http://r4ds.had.co.nz/transform.html">Wickham and Grolemund, Data Transformation</a></li>
<li>Kaplan, Data Computing, Chapters 7 and 9</li>
</ul>
<p>There are six main data transformation verbs in the <code>dplyr</code> library. Each verb takes an input data frame along with additional arguments specifying the action, and returns a new data frame. We’ll examine them in three pairs.</p>
<p><br> <br></p>
<div id="verbs-that-change-the-variables-columns-but-not-the-cases-rows" class="section level5">
<h5><span class="header-section-number">4.2.2.2.1</span> Verbs that change the variables (columns) but not the cases (rows)</h5>

<p>The first two verbs change which variables (columns) are included in the data frame, but preserve the same set of cases (rows).</p>
<ul>
<li><p><strong><code>select()</code></strong> chooses which columns to keep, or put another way, deletes those colummns that are not selected. To specify the columns, we can either list them out, or use functions like <code>starts_with()</code>, <code>ends_with()</code>, or <code>contains()</code> to specify the titles of the variables we wish to keep.</p></li>
<li><p><strong><code>mutate()</code></strong> adds one or more columns to the data frame. Each column is a function of the other columns that is applied on a row by row basis. For example, we can use arithmetic operations like adding two other variables or logical operations like checking if two columns are equal, or equal to a target number.</p></li>
</ul>
<p><br></p>

<div class="example">
<p><span id="exm:unnamed-chunk-55" class="example"><strong>Example 4.1  (select and mutate)  </strong></span></p>
<ol style="list-style-type: lower-alpha">
<li>Add two new variables to the <code>Birthdays</code> data: one that has only the last two digits of the year, and one that states whether there were more than 100 births in the given state on the given date.<br />
</li>
<li>Then form a new table that only has three columns: the state and your two new columns.<br />
</li>
<li>What does the following operation return: <code>select(Birthdays,ends_with(&quot;te&quot;))</code>?</li>
</ol>
</div>


<div class="solution">
<p> <span class="solution"><em>Solution. </em></span> The commands for the first two parts are</p>
</div>

<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">BirthdaysExtra &lt;-<span class="st"> </span><span class="kw">mutate</span>(Birthdays,
                         <span class="dt">year_short=</span>year<span class="op">-</span><span class="dv">1900</span>,
                         <span class="dt">busy_birthday=</span>(births<span class="op">&gt;</span><span class="dv">100</span>))
BirthdaysExtraTable &lt;-<span class="st"> </span><span class="kw">select</span>(BirthdaysExtra,state,
                              year_short,busy_birthday)</code></pre></div>
<p>The operation in (c) selects only the first two columns <code>state</code> and <code>date</code>.</p>
<p><br> <br></p>
</div>
<div id="verbs-that-change-the-cases-rows-but-not-the-variables-columns" class="section level5">
<h5><span class="header-section-number">4.2.2.2.2</span> Verbs that change the cases (rows) but not the variables (columns)</h5>

<p>The next two verbs change which cases (rows) are included in the data frame, but preserve the same set of variables (columns).</p>
<ul>
<li><p><strong><code>filter()</code></strong> deletes some of the rows by specifying which rows to keep.</p></li>
<li><p><strong><code>arrange()</code></strong> reorders the rows according to a specified criteria. To sort in reverse order based on the variable <code>x</code>, use <code>arrange(desc(x))</code>.</p></li>
</ul>
<p><br></p>

<div class="example">
<p><span id="exm:ex-ma" class="example"><strong>Example 4.2  (filter and arrange)  </strong></span>Create a table with only births in Massachusetts in 1979, and sort the days from those with the most births to those with the fewest.</p>
</div>


<div class="solution">
<p> <span class="solution"><em>Solution. </em></span> We want to <code>filter</code> and then <code>arrange</code>:</p>
</div>

<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">MABirths1979 &lt;-<span class="st"> </span><span class="kw">filter</span>(Birthdays, state<span class="op">==</span><span class="st">&quot;MA&quot;</span>, year<span class="op">==</span><span class="dv">1979</span>)
MABirths1979Sorted &lt;-<span class="st"> </span><span class="kw">arrange</span>(MABirths1979, <span class="kw">desc</span>(births))</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">DT<span class="op">::</span><span class="kw">datatable</span>(MABirths1979Sorted, <span class="dt">options =</span> <span class="kw">list</span>(<span class="dt">pageLength =</span> <span class="dv">6</span>),<span class="dt">caption=</span><span class="st">&quot;Birthdays in Massachusetts in 1979, sorted from those dates with the most births to those dates with the fewest births.&quot;</span>)</code></pre></div>
<div id="htmlwidget-ef8f383f985f95800168" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-ef8f383f985f95800168">{"x":{"filter":"none","caption":"<caption>Birthdays in Massachusetts in 1979, sorted from those dates with the most births to those dates with the fewest births.<\/caption>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330","331","332","333","334","335","336","337","338","339","340","341","342","343","344","345","346","347","348","349","350","351","352","353","354","355","356","357","358","359","360","361","362","363","364","365"],["MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA","MA"],["1979-09-28T00:00:00Z","1979-09-11T00:00:00Z","1979-12-28T00:00:00Z","1979-09-26T00:00:00Z","1979-07-24T00:00:00Z","1979-04-27T00:00:00Z","1979-08-06T00:00:00Z","1979-10-02T00:00:00Z","1979-06-29T00:00:00Z","1979-08-23T00:00:00Z","1979-02-23T00:00:00Z","1979-05-01T00:00:00Z","1979-07-18T00:00:00Z","1979-08-02T00:00:00Z","1979-05-24T00:00:00Z","1979-08-01T00:00:00Z","1979-04-06T00:00:00Z","1979-08-31T00:00:00Z","1979-05-10T00:00:00Z","1979-08-15T00:00:00Z","1979-03-23T00:00:00Z","1979-06-12T00:00:00Z","1979-07-10T00:00:00Z","1979-07-25T00:00:00Z","1979-06-27T00:00:00Z","1979-07-27T00:00:00Z","1979-10-05T00:00:00Z","1979-05-23T00:00:00Z","1979-09-19T00:00:00Z","1979-02-16T00:00:00Z","1979-08-16T00:00:00Z","1979-08-24T00:00:00Z","1979-09-17T00:00:00Z","1979-04-30T00:00:00Z","1979-06-26T00:00:00Z","1979-07-20T00:00:00Z","1979-08-10T00:00:00Z","1979-08-14T00:00:00Z","1979-09-24T00:00:00Z","1979-03-05T00:00:00Z","1979-06-21T00:00:00Z","1979-02-02T00:00:00Z","1979-02-27T00:00:00Z","1979-04-09T00:00:00Z","1979-05-08T00:00:00Z","1979-07-17T00:00:00Z","1979-09-14T00:00:00Z","1979-09-20T00:00:00Z","1979-06-11T00:00:00Z","1979-11-09T00:00:00Z","1979-02-14T00:00:00Z","1979-07-23T00:00:00Z","1979-08-09T00:00:00Z","1979-01-03T00:00:00Z","1979-01-22T00:00:00Z","1979-06-19T00:00:00Z","1979-09-04T00:00:00Z","1979-09-21T00:00:00Z","1979-10-23T00:00:00Z","1979-02-06T00:00:00Z","1979-03-19T00:00:00Z","1979-04-25T00:00:00Z","1979-08-20T00:00:00Z","1979-09-18T00:00:00Z","1979-11-06T00:00:00Z","1979-02-20T00:00:00Z","1979-04-26T00:00:00Z","1979-08-13T00:00:00Z","1979-08-17T00:00:00Z","1979-09-10T00:00:00Z","1979-10-25T00:00:00Z","1979-10-26T00:00:00Z","1979-03-06T00:00:00Z","1979-06-01T00:00:00Z","1979-08-29T00:00:00Z","1979-09-27T00:00:00Z","1979-10-01T00:00:00Z","1979-11-19T00:00:00Z","1979-04-24T00:00:00Z","1979-05-21T00:00:00Z","1979-06-28T00:00:00Z","1979-07-09T00:00:00Z","1979-08-03T00:00:00Z","1979-09-06T00:00:00Z","1979-10-03T00:00:00Z","1979-06-07T00:00:00Z","1979-06-14T00:00:00Z","1979-07-03T00:00:00Z","1979-08-08T00:00:00Z","1979-10-04T00:00:00Z","1979-10-22T00:00:00Z","1979-10-29T00:00:00Z","1979-10-09T00:00:00Z","1979-01-16T00:00:00Z","1979-03-13T00:00:00Z","1979-05-04T00:00:00Z","1979-05-14T00:00:00Z","1979-06-22T00:00:00Z","1979-03-30T00:00:00Z","1979-06-05T00:00:00Z","1979-12-14T00:00:00Z","1979-12-27T00:00:00Z","1979-03-08T00:00:00Z","1979-04-18T00:00:00Z","1979-08-28T00:00:00Z","1979-10-12T00:00:00Z","1979-11-14T00:00:00Z","1979-12-31T00:00:00Z","1979-04-23T00:00:00Z","1979-05-11T00:00:00Z","1979-05-18T00:00:00Z","1979-05-30T00:00:00Z","1979-07-06T00:00:00Z","1979-07-19T00:00:00Z","1979-10-17T00:00:00Z","1979-10-24T00:00:00Z","1979-12-11T00:00:00Z","1979-02-05T00:00:00Z","1979-03-07T00:00:00Z","1979-03-29T00:00:00Z","1979-09-07T00:00:00Z","1979-10-30T00:00:00Z","1979-07-02T00:00:00Z","1979-01-15T00:00:00Z","1979-03-26T00:00:00Z","1979-04-04T00:00:00Z","1979-07-15T00:00:00Z","1979-02-08T00:00:00Z","1979-04-11T00:00:00Z","1979-06-06T00:00:00Z","1979-06-30T00:00:00Z","1979-07-30T00:00:00Z","1979-09-29T00:00:00Z","1979-10-10T00:00:00Z","1979-02-09T00:00:00Z","1979-03-09T00:00:00Z","1979-04-20T00:00:00Z","1979-06-20T00:00:00Z","1979-07-26T00:00:00Z","1979-08-21T00:00:00Z","1979-09-25T00:00:00Z","1979-11-26T00:00:00Z","1979-01-02T00:00:00Z","1979-02-22T00:00:00Z","1979-07-12T00:00:00Z","1979-07-13T00:00:00Z","1979-09-05T00:00:00Z","1979-05-25T00:00:00Z","1979-11-23T00:00:00Z","1979-11-28T00:00:00Z","1979-12-04T00:00:00Z","1979-01-26T00:00:00Z","1979-03-22T00:00:00Z","1979-05-16T00:00:00Z","1979-10-16T00:00:00Z","1979-11-16T00:00:00Z","1979-12-24T00:00:00Z","1979-03-02T00:00:00Z","1979-04-03T00:00:00Z","1979-04-12T00:00:00Z","1979-05-03T00:00:00Z","1979-10-06T00:00:00Z","1979-11-01T00:00:00Z","1979-11-30T00:00:00Z","1979-12-10T00:00:00Z","1979-12-17T00:00:00Z","1979-06-08T00:00:00Z","1979-06-15T00:00:00Z","1979-11-11T00:00:00Z","1979-01-29T00:00:00Z","1979-03-21T00:00:00Z","1979-03-28T00:00:00Z","1979-04-10T00:00:00Z","1979-05-02T00:00:00Z","1979-10-15T00:00:00Z","1979-11-07T00:00:00Z","1979-01-18T00:00:00Z","1979-04-19T00:00:00Z","1979-07-11T00:00:00Z","1979-07-21T00:00:00Z","1979-08-05T00:00:00Z","1979-10-19T00:00:00Z","1979-11-02T00:00:00Z","1979-11-15T00:00:00Z","1979-11-20T00:00:00Z","1979-01-11T00:00:00Z","1979-02-12T00:00:00Z","1979-03-14T00:00:00Z","1979-05-22T00:00:00Z","1979-02-26T00:00:00Z","1979-03-15T00:00:00Z","1979-06-13T00:00:00Z","1979-06-18T00:00:00Z","1979-07-31T00:00:00Z","1979-08-26T00:00:00Z","1979-09-13T00:00:00Z","1979-11-13T00:00:00Z","1979-12-07T00:00:00Z","1979-05-31T00:00:00Z","1979-11-27T00:00:00Z","1979-12-06T00:00:00Z","1979-02-21T00:00:00Z","1979-04-17T00:00:00Z","1979-04-21T00:00:00Z","1979-06-25T00:00:00Z","1979-08-04T00:00:00Z","1979-08-07T00:00:00Z","1979-10-08T00:00:00Z","1979-10-11T00:00:00Z","1979-01-13T00:00:00Z","1979-04-13T00:00:00Z","1979-01-19T00:00:00Z","1979-03-16T00:00:00Z","1979-05-07T00:00:00Z","1979-09-12T00:00:00Z","1979-11-05T00:00:00Z","1979-01-10T00:00:00Z","1979-01-30T00:00:00Z","1979-03-11T00:00:00Z","1979-06-17T00:00:00Z","1979-08-27T00:00:00Z","1979-09-09T00:00:00Z","1979-12-13T00:00:00Z","1979-01-05T00:00:00Z","1979-02-19T00:00:00Z","1979-03-01T00:00:00Z","1979-07-14T00:00:00Z","1979-11-29T00:00:00Z","1979-01-08T00:00:00Z","1979-01-12T00:00:00Z","1979-02-15T00:00:00Z","1979-03-24T00:00:00Z","1979-10-28T00:00:00Z","1979-04-02T00:00:00Z","1979-05-27T00:00:00Z","1979-12-03T00:00:00Z","1979-12-12T00:00:00Z","1979-04-01T00:00:00Z","1979-04-05T00:00:00Z","1979-08-22T00:00:00Z","1979-12-26T00:00:00Z","1979-01-24T00:00:00Z","1979-07-16T00:00:00Z","1979-11-21T00:00:00Z","1979-04-16T00:00:00Z","1979-06-10T00:00:00Z","1979-08-11T00:00:00Z","1979-02-07T00:00:00Z","1979-03-17T00:00:00Z","1979-03-27T00:00:00Z","1979-04-07T00:00:00Z","1979-05-09T00:00:00Z","1979-05-15T00:00:00Z","1979-05-17T00:00:00Z","1979-07-07T00:00:00Z","1979-09-15T00:00:00Z","1979-10-07T00:00:00Z","1979-03-12T00:00:00Z","1979-03-20T00:00:00Z","1979-12-05T00:00:00Z","1979-01-04T00:00:00Z","1979-02-01T00:00:00Z","1979-05-29T00:00:00Z","1979-09-03T00:00:00Z","1979-11-08T00:00:00Z","1979-12-19T00:00:00Z","1979-12-21T00:00:00Z","1979-01-23T00:00:00Z","1979-04-28T00:00:00Z","1979-06-24T00:00:00Z","1979-07-28T00:00:00Z","1979-07-29T00:00:00Z","1979-08-19T00:00:00Z","1979-10-21T00:00:00Z","1979-10-18T00:00:00Z","1979-01-09T00:00:00Z","1979-02-11T00:00:00Z","1979-05-19T00:00:00Z","1979-05-28T00:00:00Z","1979-06-03T00:00:00Z","1979-10-20T00:00:00Z","1979-10-31T00:00:00Z","1979-12-18T00:00:00Z","1979-01-31T00:00:00Z","1979-03-10T00:00:00Z","1979-04-29T00:00:00Z","1979-07-05T00:00:00Z","1979-08-30T00:00:00Z","1979-01-25T00:00:00Z","1979-05-26T00:00:00Z","1979-10-14T00:00:00Z","1979-02-28T00:00:00Z","1979-07-08T00:00:00Z","1979-02-25T00:00:00Z","1979-04-15T00:00:00Z","1979-09-22T00:00:00Z","1979-06-23T00:00:00Z","1979-07-22T00:00:00Z","1979-10-27T00:00:00Z","1979-02-10T00:00:00Z","1979-08-25T00:00:00Z","1979-09-16T00:00:00Z","1979-11-12T00:00:00Z","1979-11-17T00:00:00Z","1979-06-02T00:00:00Z","1979-07-01T00:00:00Z","1979-10-13T00:00:00Z","1979-03-25T00:00:00Z","1979-06-16T00:00:00Z","1979-11-10T00:00:00Z","1979-02-13T00:00:00Z","1979-03-31T00:00:00Z","1979-06-09T00:00:00Z","1979-11-25T00:00:00Z","1979-12-22T00:00:00Z","1979-05-06T00:00:00Z","1979-09-02T00:00:00Z","1979-01-06T00:00:00Z","1979-08-12T00:00:00Z","1979-09-08T00:00:00Z","1979-11-03T00:00:00Z","1979-12-15T00:00:00Z","1979-02-18T00:00:00Z","1979-09-01T00:00:00Z","1979-11-18T00:00:00Z","1979-12-01T00:00:00Z","1979-02-24T00:00:00Z","1979-04-22T00:00:00Z","1979-04-14T00:00:00Z","1979-07-04T00:00:00Z","1979-09-23T00:00:00Z","1979-12-02T00:00:00Z","1979-06-04T00:00:00Z","1979-12-16T00:00:00Z","1979-01-21T00:00:00Z","1979-01-27T00:00:00Z","1979-05-12T00:00:00Z","1979-09-30T00:00:00Z","1979-12-29T00:00:00Z","1979-12-23T00:00:00Z","1979-02-03T00:00:00Z","1979-08-18T00:00:00Z","1979-01-20T00:00:00Z","1979-02-17T00:00:00Z","1979-03-03T00:00:00Z","1979-03-04T00:00:00Z","1979-11-24T00:00:00Z","1979-12-09T00:00:00Z","1979-01-07T00:00:00Z","1979-01-14T00:00:00Z","1979-01-17T00:00:00Z","1979-04-08T00:00:00Z","1979-11-04T00:00:00Z","1979-12-20T00:00:00Z","1979-02-04T00:00:00Z","1979-05-20T00:00:00Z","1979-03-18T00:00:00Z","1979-12-30T00:00:00Z","1979-12-08T00:00:00Z","1979-12-25T00:00:00Z","1979-05-05T00:00:00Z","1979-11-22T00:00:00Z","1979-01-28T00:00:00Z","1979-01-01T00:00:00Z","1979-05-13T00:00:00Z"],[1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979,1979],[262,252,249,246,245,243,243,239,238,238,237,236,236,236,235,235,234,234,233,233,232,232,232,232,231,231,231,230,229,228,228,228,228,227,227,227,227,227,227,226,226,225,225,225,225,225,225,225,224,224,223,223,223,222,222,222,222,222,222,221,221,221,221,221,221,220,220,220,220,220,220,220,219,219,219,219,219,219,218,218,218,218,218,218,218,217,217,217,217,217,217,217,216,215,215,215,215,215,214,214,214,214,213,213,213,213,213,213,212,212,212,212,212,212,212,212,212,211,211,211,211,211,210,209,209,209,209,208,208,208,208,208,208,208,207,207,207,207,207,207,207,207,206,206,206,206,206,205,205,205,205,204,204,204,204,204,204,203,203,203,203,203,203,203,203,203,202,202,202,201,201,201,201,201,201,201,200,200,200,200,200,200,200,200,200,199,199,199,199,198,198,198,198,198,198,198,198,198,197,197,197,196,196,196,196,196,196,196,196,195,195,194,194,194,194,194,193,193,193,193,193,193,193,192,192,192,192,192,191,191,191,191,191,190,190,190,190,189,189,189,189,188,188,188,187,187,187,186,186,186,186,186,186,186,186,186,186,185,185,185,184,184,184,184,184,184,184,183,183,183,183,183,183,183,182,180,180,180,180,180,180,180,180,179,179,179,179,179,178,178,178,177,177,176,176,176,175,175,175,174,174,174,174,174,173,173,173,172,172,172,171,171,171,171,171,170,170,169,169,169,169,169,168,168,166,166,165,165,164,164,164,164,163,163,162,162,162,162,161,160,159,159,158,156,156,156,156,156,155,155,155,155,155,154,153,153,152,152,151,150,148,147,146,144,143]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>state<\/th>\n      <th>date<\/th>\n      <th>year<\/th>\n      <th>births<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":6,"columnDefs":[{"className":"dt-right","targets":[3,4]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[6,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
<p><br></p>
<p>When filtering, we often use logical comparison operators like <code>==</code>, <code>&gt;</code>, <code>&lt;</code>, <code>&gt;=</code> (greater than or equal to), <code>&lt;=</code> (less than or equal to), and <code>%in%</code>, which compares the value to a list of entries.<a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a> For example, if we want all births in AK, CA, and MA, we can write</p>
<pre><code>filter(Birthdays, state %in% c(&quot;AK&quot;,&quot;CA&quot;,&quot;MA&quot;))</code></pre>
<p>The <code>c()</code> here is for concatenate, which is how we form vectors in <code>R</code>.</p>
<p><br> <br></p>
</div>
<div id="grouped-summaries" class="section level5">
<h5><span class="header-section-number">4.2.2.2.3</span> Grouped summaries</h5>
<ul>
<li><strong><code>summarise()</code></strong> (or equivalently <strong><code>summarize()</code></strong>) takes an entire data frame as input and outputs a single row with one or more summary statistics, such as <code>mean</code>, <code>sum</code>, <code>sd</code>, <code>n_distinct()</code>, or <code>n()</code> (which, like <code>tally()</code>, just counts the number of entries).</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summarise</span>(Birthdays,<span class="dt">total_births=</span><span class="kw">sum</span>(births),
          <span class="dt">average_births=</span><span class="kw">mean</span>(births),
          <span class="dt">nstates=</span><span class="kw">n_distinct</span>(state),<span class="dt">ncases=</span><span class="kw">n</span>())
##   total_births average_births nstates ncases
## 1     70486538            189      51 372864</code></pre></div>
<p>So <code>summarise</code> changes both the cases and the variables. Alone, <code>summarise</code> is not all that useful, because we can also access individual variables directly with the dollar sign. For example, to find the total and average births, we can write</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sum</span>(Birthdays<span class="op">$</span>births)
## [1] 70486538
<span class="kw">mean</span>(Birthdays<span class="op">$</span>births)
## [1] 189</code></pre></div>
<p>Rather, we will mostly use it to create <strong>grouped summaries</strong>, which brings us to the last of the six main data verbs.</p>
<ul>
<li><strong><code>group_by()</code></strong> groups the cases of a data frame by a specified set of variables. The size of the stored data frame does not actually change (neither the cases nor the variables change), but then other functions can be applied to the specified groups instead of the entire data set. We’ll often use <code>group_by</code> in conjunction with <code>summarise</code> to get a grouped summary.</li>
</ul>
<p><br></p>

<div class="example">
<p><span id="exm:unnamed-chunk-63" class="example"><strong>Example 4.3  (Grouped summary)  </strong></span></p>
<ol style="list-style-type: lower-alpha">
<li>Find the average number of daily births (per state) in each year.</li>
<li>Find the average number of daily births in each year, by state.</li>
</ol>
</div>


<div class="solution">
<p> <span class="solution"><em>Solution. </em></span> We have to first group by the desired grouping and then perform a summarise.</p>
</div>

<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">BirthdaysYear&lt;-<span class="kw">group_by</span>(Birthdays,year)
<span class="kw">summarise</span>(BirthdaysYear, <span class="dt">average=</span><span class="kw">mean</span>(births))
## # A tibble: 20 x 2
##     year average
##    &lt;int&gt;   &lt;dbl&gt;
##  1  1969    192.
##  2  1970    200.
##  3  1971    191.
##  4  1972    175.
##  5  1973    169.
##  6  1974    170.
##  7  1975    169.
##  8  1976    170.
##  9  1977    179.
## 10  1978    179.
## 11  1979    188.
## 12  1980    194.
## 13  1981    195.
## 14  1982    198.
## 15  1983    196.
## 16  1984    197.
## 17  1985    202.
## 18  1986    202.
## 19  1987    205.
## 20  1988    210.</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">BirthdaysYearState&lt;-<span class="kw">group_by</span>(Birthdays,year,state)
<span class="kw">summarise</span>(BirthdaysYearState, <span class="dt">average=</span><span class="kw">mean</span>(births))
## # A tibble: 1,020 x 3
## # Groups:   year [20]
##     year state average
##    &lt;int&gt; &lt;chr&gt;   &lt;dbl&gt;
##  1  1969 AK       18.6
##  2  1969 AL      174. 
##  3  1969 AR       91.3
##  4  1969 AZ       93.3
##  5  1969 CA      954. 
##  6  1969 CO      110. 
##  7  1969 CT      134. 
##  8  1969 DC       75.3
##  9  1969 DE       27.6
## 10  1969 FL      292. 
## # … with 1,010 more rows</code></pre></div>
<p><br> <br></p>
</div>
</div>
<div id="piping" class="section level4">
<h4><span class="header-section-number">4.2.2.3</span> Piping</h4>
<p>Additional reading:</p>
<ul>
<li><a href="http://r4ds.had.co.nz/transform.html#grouped-summaries-with-summarise">Wickham and Grolemund, Combining Multiple Operations with the Pipe</a></li>
<li><a href="http://r4ds.had.co.nz/pipes.html">Wickham and Grolemund, Pipes</a></li>
</ul>
<p>Pipes offer an efficient way to execute multiple operations at once. Here is a more efficient way to redo Example <a href="day-2a-data-wrangling.html#exm:ex-ma">4.2</a> with <strong>the pipe</strong>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">QuickMABirths1979&lt;-
<span class="st">  </span>Birthdays <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(state<span class="op">==</span><span class="st">&quot;MA&quot;</span>,year<span class="op">==</span><span class="dv">1979</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(births))</code></pre></div>
<p>With the pipe notation, <code>x%&gt;%f(y)</code> becomes <code>f(x,y)</code>, where in the first line here, <code>x</code> is <code>Birthdays</code>, the function <code>f</code> is <code>filter</code>, and <code>y</code> is <code>state==&quot;MA&quot;,year==1979</code>. The really nice thing about piping is that you can chain together a bunch of different operations without having to save the intermediate results. This is what we have done above by chaining together a <code>filter</code> followed by an <code>arrange</code>.</p>
<p><br> <br></p>
</div>
<div id="manipulating-dates" class="section level4">
<h4><span class="header-section-number">4.2.2.4</span> Manipulating Dates</h4>
<p>Additional reading:</p>
<ul>
<li><a href="http://r4ds.had.co.nz/dates-and-times.html">Wickham and Grolemund, Date and Times with <code>lubridate</code></a></li>
</ul>
<p>The <code>date</code> variable in <code>Birthdays</code> prints out in the conventional, human-readable way. But it is actually in a format (called <code>POSIX</code> date format) that automatically respects the order of time. The <code>lubridate</code> package contains helpful functions that will extract various information about any date. Here are some you might find useful:</p>
<ul>
<li><code>year()</code></li>
<li><code>month()</code></li>
<li><code>week()</code></li>
<li><code>yday()</code> — gives the day of the year as a number 1-366. This is often called the “Julian day.”</li>
<li><code>mday()</code> — gives the day of the month as a number 1-31</li>
<li><code>wday()</code> — gives the weekday (e.g. Monday, Tuesday, …). Use the optional argument <code>label=TRUE</code> to have the weekday spelled out rather than given as a number 1-7.</li>
</ul>
<p>Using these <code>lubridate</code> functions, you can easily look at the data in more detail. For example, we can add columns to the date table for month and day of the week:<a href="#fn3" class="footnoteRef" id="fnref3"><sup>3</sup></a></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Birthdays&lt;-
<span class="st">  </span>Birthdays <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">month=</span><span class="kw">month</span>(date,<span class="dt">label=</span><span class="ot">TRUE</span>),
         <span class="dt">weekday=</span><span class="kw">wday</span>(date,<span class="dt">label=</span><span class="ot">TRUE</span>))</code></pre></div>
<p>Here is what the data table looks like with our new columns:</p>
<table>
<caption><span id="tab:unnamed-chunk-69">Table 4.2: </span>A subset of the birthday data with additional variables.</caption>
<thead>
<tr class="header">
<th align="left">state</th>
<th align="left">date</th>
<th align="right">year</th>
<th align="right">births</th>
<th align="left">month</th>
<th align="left">weekday</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">AK</td>
<td align="left">1969-01-01</td>
<td align="right">1969</td>
<td align="right">14</td>
<td align="left">Jan</td>
<td align="left">Wed</td>
</tr>
<tr class="even">
<td align="left">AL</td>
<td align="left">1969-01-01</td>
<td align="right">1969</td>
<td align="right">174</td>
<td align="left">Jan</td>
<td align="left">Wed</td>
</tr>
<tr class="odd">
<td align="left">AR</td>
<td align="left">1969-01-01</td>
<td align="right">1969</td>
<td align="right">78</td>
<td align="left">Jan</td>
<td align="left">Wed</td>
</tr>
<tr class="even">
<td align="left">AZ</td>
<td align="left">1969-01-01</td>
<td align="right">1969</td>
<td align="right">84</td>
<td align="left">Jan</td>
<td align="left">Wed</td>
</tr>
<tr class="odd">
<td align="left">CA</td>
<td align="left">1969-01-01</td>
<td align="right">1969</td>
<td align="right">824</td>
<td align="left">Jan</td>
<td align="left">Wed</td>
</tr>
<tr class="even">
<td align="left">CO</td>
<td align="left">1969-01-01</td>
<td align="right">1969</td>
<td align="right">100</td>
<td align="left">Jan</td>
<td align="left">Wed</td>
</tr>
</tbody>
</table>
<p><br></p>

<div class="example">
<p><span id="exm:unnamed-chunk-70" class="example"><strong>Example 4.4  </strong></span>Make a table showing the five states with the most births between September 9, 1979 and September 11, 1979, inclusive. Arrange the table in descending order of births.</p>
</div>


<div class="solution">
<p> <span class="solution"><em>Solution. </em></span> The plan of attack is to first filter the dates, then group by state, then use a <code>summarise</code> to add up totals for each state, and finally arrange them in descending order to find the top 5.<a href="#fn4" class="footnoteRef" id="fnref4"><sup>4</sup></a></p>
</div>

<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">SepTable&lt;-
<span class="st">  </span>Birthdays <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(date <span class="op">&gt;=</span><span class="st"> </span><span class="kw">ymd</span>(<span class="dv">19790909</span>), date <span class="op">&lt;=</span><span class="kw">ymd</span>(<span class="dv">19790911</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">group_by</span>(state) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">total=</span><span class="kw">sum</span>(births)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(total)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">head</span>(<span class="dt">n=</span><span class="dv">5</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">knitr<span class="op">::</span><span class="kw">kable</span>(
  SepTable[,], <span class="dt">caption =</span> <span class="st">&#39;States with the </span>
<span class="st">  most births between September 9, 1979 </span>
<span class="st">  and September 11, 1979, inclusive.&#39;</span>
)</code></pre></div>
<table>
<caption><span id="tab:unnamed-chunk-73">Table 4.3: </span>States with the most births between September 9, 1979 and September 11, 1979, inclusive.</caption>
<thead>
<tr class="header">
<th align="left">state</th>
<th align="right">total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">CA</td>
<td align="right">3246</td>
</tr>
<tr class="even">
<td align="left">TX</td>
<td align="right">2347</td>
</tr>
<tr class="odd">
<td align="left">NY</td>
<td align="right">1943</td>
</tr>
<tr class="even">
<td align="left">IL</td>
<td align="right">1673</td>
</tr>
<tr class="odd">
<td align="left">OH</td>
<td align="right">1408</td>
</tr>
</tbody>
</table>
<p><br> <br></p>
</div>
</div>
<div id="exercises-baby-names" class="section level3">
<h3><span class="header-section-number">4.2.3</span> Exercises: Baby Names</h3>
<p>We are going to practice the six data verbs on the <code>babynames</code> dataset:</p>
<table>
<caption><span id="tab:unnamed-chunk-74">Table 4.4: </span>A subset of the babynames data, which runs from 1880-2015 and is provided by the US Social Security Administration.</caption>
<thead>
<tr class="header">
<th align="right">year</th>
<th align="left">sex</th>
<th align="left">name</th>
<th align="right">n</th>
<th align="right">prop</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1880</td>
<td align="left">F</td>
<td align="left">Mary</td>
<td align="right">7065</td>
<td align="right">0.0724</td>
</tr>
<tr class="even">
<td align="right">1880</td>
<td align="left">F</td>
<td align="left">Anna</td>
<td align="right">2604</td>
<td align="right">0.0267</td>
</tr>
<tr class="odd">
<td align="right">1880</td>
<td align="left">F</td>
<td align="left">Emma</td>
<td align="right">2003</td>
<td align="right">0.0205</td>
</tr>
<tr class="even">
<td align="right">1880</td>
<td align="left">F</td>
<td align="left">Elizabeth</td>
<td align="right">1939</td>
<td align="right">0.0199</td>
</tr>
<tr class="odd">
<td align="right">1880</td>
<td align="left">F</td>
<td align="left">Minnie</td>
<td align="right">1746</td>
<td align="right">0.0179</td>
</tr>
<tr class="even">
<td align="right">1880</td>
<td align="left">F</td>
<td align="left">Margaret</td>
<td align="right">1578</td>
<td align="right">0.0162</td>
</tr>
</tbody>
</table>
<p><br></p>

<div class="exercise">
<p><span id="exr:unnamed-chunk-75" class="exercise"><strong>Exercise 4.1  </strong></span>Add a new boolean (true or false) variable called <code>has2000</code> that indicates whether there were more than 2000 babies of that sex with that name in each year. Display the first six rows of your new table.</p>
</div>


<div class="exercise">
<p><span id="exr:unnamed-chunk-76" class="exercise"><strong>Exercise 4.2  </strong></span>Find the number of total babies per year, sorted by most babies to least babies.</p>
</div>


<div class="exercise">
<p><span id="exr:unnamed-chunk-77" class="exercise"><strong>Exercise 4.3  </strong></span>Find the twelve most popular names overall (i.e., totaled over all year and sexes), ordered by popularity.</p>
</div>


<div class="exercise">
<p><span id="exr:unnamed-chunk-78" class="exercise"><strong>Exercise 4.4  </strong></span>Find the most popular names for males, over all years and ordered by popularity.</p>
</div>


<div class="exercise">
<p><span id="exr:unnamed-chunk-79" class="exercise"><strong>Exercise 4.5  </strong></span>Find the most popular names for females, over all years and ordered by popularity.</p>
</div>


<div class="exercise">
<p><span id="exr:unnamed-chunk-80" class="exercise"><strong>Exercise 4.6  </strong></span>Calculate the number of babies born each decade, and arrange them in descending order. Calculating the decade may be the trickiest part of this question!</p>
</div>


<div class="exercise">
<p><span id="exr:unnamed-chunk-81" class="exercise"><strong>Exercise 4.7  </strong></span>Calculate the most popular name for each year. Print out the answer for the years 2006-2015. This is tricky, but try Googling for hints if you are stuck.</p>
</div>

<p><br />
<br />
<br />
<br />
<br />
<br />
<br />
<br />
</p>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>The <code>fivethirtyeight</code> package has more recent data.<a href="day-2a-data-wrangling.html#fnref1">↩</a></p></li>
<li id="fn2"><p><strong>Important note about <code>=</code> vs. <code>==</code></strong>: A single <code>=</code> is an assignment operator that assigns the value after the equal sign to the variable before the equal sign. We saw an example of this above with <code>year_short=year-1900</code>. In order to compare whether two values are the same, we need to use the double equal <code>==</code> as in <code>year==1979</code>.<a href="day-2a-data-wrangling.html#fnref2">↩</a></p></li>
<li id="fn3"><p>The <code>label=TRUE</code> argument tells <code>month</code> to return a string abbreviation for the month instead of the month’s number.<a href="day-2a-data-wrangling.html#fnref3">↩</a></p></li>
<li id="fn4"><p>The verbs <code>head(n=5)</code>, <code>tail(n=3)</code> are often used just after an <code>arrange</code> to keep, e.g., only the first 5 entries or last 3 entries, where <code>n</code> specifies the number of entries to keep.<a href="day-2a-data-wrangling.html#fnref4">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="day-1-visualizing-modeling-variability.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="day-2b-model-assumptions-measuring-model-quality.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"download": null,
"toc": {
"collapse": "section",
"depth": 3,
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
},
"search": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
